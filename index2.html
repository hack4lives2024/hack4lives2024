<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditional Questionnaire</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            text-align: center;
            background-color: #F5F5DC;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        .button-container {
            margin-top: 50px;
        }
        button {
            background-color: #F5F5DC;
            border: 1px solid #777;
            border-radius: 8px;
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
        }
        button:hover {
            background-color: #d3d3d3;
            cursor: pointer;
        }
        button:active {
            transform: scale(0.95);
        }
        form {
            background-color: #fff;
            max-width: 500px;
            margin: 50px auto;
            padding: 30px 20px;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
        }

        .form-control {
            text-align: left;
            margin-bottom: 25px;
        }

        .form-control input,
        .form-control select,
        .form-control textarea {
            border-radius: 8px;
        }
        #answers-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #answers-section h2 {
            text-align: center;
        }
        #explore-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #graph-container {
            margin-top: 50px;
            display: none;
            text-align: center;
        }
        footer {
            text-align: center;
            padding: 3px;
            background-color: DarkSalmon;
            color: white;
            grid-area: footer;
            margin-top: auto;
        }
    </style>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>Who Are You?</h1>

<div class="button-container">
    <button id="teacher-btn">Teacher</button>
    <button id="student-btn">Student</button>
</div>

<!-- Student Questionnaire -->
<div id="student-section" class="section">
    <h2>Student Questionnaire</h2>
    <form id="student-form">
        <div class="form-control">
            <label for="role" id="label-role">
                Choose your answer:
            </label>
            <select name="role" id="role">
                <option value="student">Answer 1</option>
                <option value="intern">Answer 2</option>
                <option value="professional">Answer 3</option>
                <option value="other">Answer 4</option>
            </select>
        </div>
        <div class="form-control">
            <label>
                Closed question - One choice
            </label>
            <label for="recommend-1">
                <input type="radio" id="recommend-1" name="recommend" value="A">A
            </label>
            <label for="recommend-2">
                <input type="radio" id="recommend-2" name="recommend" value="B">B
            </label>
            <label for="recommend-3">
                <input type="radio" id="recommend-3" name="recommend" value="C">C
            </label>
            <label for="recommend-4">
                <input type="radio" id="recommend-4" name="recommend" value="D">D
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>

<!-- Teacher Questionnaire -->
<div id="teacher-section" class="section">
    <h2>Teacher Questionnaire</h2>
    <form id="teacher-form">
        <label for="teacher-name">Your Name:</label><br>
        <input type="text" id="teacher-name" placeholder="Enter your name"><br><br>

        <label for="teacher-subject">Subject Taught:</label><br>
        <input type="text" id="teacher-subject" placeholder="Enter the subject you teach"><br><br>

        <button type="submit">Submit</button>
    </form>
</div>

<!-- Answers Section -->
<div id="answers-section">
    <h2>Your Answers</h2>
    <div id="answers-content"></div>
</div>

<!-- Explore More Section -->
<div id="explore-section">
    <h2>Explore More</h2>
    <div class="form-control">
        <label for="y-variable">Choose Variable Y:</label>
        <select id="y-variable">
            <option value="anxiety">Anxiety</option>
            <option value="test-score">Test Score</option>
        </select>
    </div>
    <div class="form-control">
        <label for="x-variable">Choose Variable X:</label>
        <select id="x-variable">
            <option value="gender">Gender</option>
            <option value="age">Age</option>
        </select>
    </div>
    <div class="form-control">
        <label for="x-variable">Choose country:</label>
        <select id="x-variable">
            <option value="gender">Poland</option>
            <option value="age">Italy</option>
        </select>
    </div>
    <button id="show-button">Show</button>
</div>

<!-- Bar Graph Container -->
<div id="graph-container">
    <h2>Bar Graph</h2>
    <canvas id="bar-chart"></canvas>
    <button id="download-button">Download Chart</button>
    <h3 id="text-stuff">Some text</h3>
</div>
<footer>
Put stuff here
</footer>
<script>
    let barChart;
    // Handle Teacher Button Click
    document.getElementById("teacher-btn").addEventListener("click", function() {
        document.querySelector("h1").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("student-section").style.display = "none";
        document.getElementById("teacher-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("teacher-section").offsetTop, behavior: "smooth" });
    });

    // Handle Student Button Click
    document.getElementById("student-btn").addEventListener("click", function() {
        document.querySelector("h1").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("student-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("student-section").offsetTop, behavior: "smooth" });
    });

    // Handle Student Form Submission
    document.getElementById("student-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get student answers
        const selectedRole = document.getElementById("role").value;
        const selectedRecommendation = document.querySelector('input[name="recommend"]:checked')?.value || "No choice made";

        // Display answers in the answers section
        const answersContent = `
            <p><strong>Selected Role:</strong> ${selectedRole}</p>
            <p><strong>Recommendation:</strong> ${selectedRecommendation}</p>
        `;
        document.getElementById("answers-content").innerHTML = answersContent;

        // Hide questionnaire and show answers section
        document.getElementById("student-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle Teacher Form Submission
    document.getElementById("teacher-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get teacher answers
        const teacherName = document.getElementById("teacher-name").value;
        const teacherSubject = document.getElementById("teacher-subject").value;

        // Display answers in the answers section
        const answersContent = `
            <p><strong>Name:</strong> ${teacherName}</p>
            <p><strong>Subject:</strong> ${teacherSubject}</p>
        `;
        document.getElementById("answers-content").innerHTML = answersContent;

        // Hide questionnaire and show answers section
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle Explore More - Show Button Click
    
    document.getElementById("show-button").addEventListener("click", function () {
        // Show the graph container
        document.getElementById("graph-container").style.display = "block";

        // Get the canvas context
        const ctx = document.getElementById('bar-chart').getContext('2d');

        // Create the bar chart
        barChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Category 1', 'Category 2', 'Category 3'],
                datasets: [{
                    label: 'Filler Data',
                    data: [12, 19, 3],
                    backgroundColor: ['#FF5733', '#33FF57', '#3357FF'],
                    borderColor: ['#FF5733', '#33FF57', '#3357FF'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                //scales: {
                //    y: {
                //        beginAtZero: true
                //    }
                //}
            }
        });

        setTimeout(() => {
            window.scrollTo({
                top: document.getElementById("text-stuff").offsetTop + document.getElementById("text-stuff").offsetHeight,
                behavior: "smooth"
            });
        }, 300); // Allow time for rendering
    });

    // Download Chart
    document.getElementById("download-button").addEventListener("click", function () {
        if (barChart) {
            const url = barChart.toBase64Image(); // Convert chart to Base64 image
            const link = document.createElement('a'); // Create a temporary link
            link.href = url;
            link.download = 'chart.png'; // Set the file name for download
            link.click(); // Simulate a click to trigger the download
        }
    });
    
</script>

</body>
</html>
