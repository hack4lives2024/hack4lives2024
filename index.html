<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditional Questionnaire</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            text-align: center;
            background-color: #F5F5DC;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        form {
            background-color: #fff;
            max-width: 500px;
            margin: 50px auto;
            padding: 30px 20px;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
        }

        .form-control {
            text-align: left;
            margin-bottom: 25px;
        }

        .form-control input,
        .form-control select,
        .form-control textarea {
            border-radius: 8px;
        }
        .form-control label {
            display: block;
            margin-bottom: 10px;
        }
        .section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        .button-container {
            margin-top: 50px;
        }
        button {
            background-color: #F5F5DC;
            border: 1px solid #777;
            border-radius: 8px;
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
        }
        button:hover {
            background-color: #d3d3d3;
            cursor: pointer;
        }
        button:active {
            transform: scale(0.95);
        }
        form {
            background-color: #fff;
            max-width: 500px;
            margin: 50px auto;
            padding: 30px 20px;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
        }

        .form-control {
            text-align: left;
            margin-bottom: 25px;
        }

        .form-control input,
        .form-control select,
        .form-control textarea {
            border-radius: 8px;
        }
        #answers-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #general {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #answers-section h2 {
            text-align: center;
        }
        #explore-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #graph-container {
            
            height: 80vh;
            margin-top: 50px;
            display: none;
            text-align: center;
            flex-direction: column;
        }
        #text-container {
            height: 80vh;
            margin: 0 auto;
            margin-top: 50px;
            display: none;
            text-align: center;
            flex-direction: column;
        }
        footer {
            text-align: center;
            padding: 10px;
            background-color: black;
            color: white;
            grid-area: footer;
            margin-top: auto;
        }
        #download-button {
            margin-top: 20px; /* Space above the button */
            margin-bottom: 10px; /* Space below the button */
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #download-button:hover {
            background-color: #45a049;
        }
        @keyframes click-wave {
        0% {
            height: 40px;
            width: 40px;
            opacity: 0.15;
            position: relative;
        }
        100% {
            height: 200px;
            width: 200px;
            margin-left: -80px;
            margin-top: -80px;
            opacity: 0;
        }
        }
        .option-input {
        -webkit-appearance: none;
        -moz-appearance: none;
        -ms-appearance: none;
        -o-appearance: none;
        appearance: none;
        position: relative;
        top: 13.33333px;
        right: 0;
        bottom: 0;
        left: 0;
        height: 40px;
        width: 40px;
        transition: all 0.15s ease-out 0s;
        background: #cbd1d8;
        border: none;
        color: #fff;
        cursor: pointer;
        display: inline-block;
        margin-right: 0.5rem;
        outline: none;
        position: relative;
        z-index: 1000;
        }
        .option-input:hover {
        background: #9faab7;
        }
        .option-input:checked {
        background: black;
        }
        .option-input:checked::before {
        height: 40px;
        width: 40px;
        position: absolute;
        content: "\f111";
        font-family: "Font Awesome 5 Free";
        display: inline-block;
        font-size: 26.66667px;
        text-align: center;
        line-height: 40px;
        }
        /* #bar-chart {
            width: 40vw !important;
            height: 80vh !important;
            justify-content: center;
        } */
        .option-input:checked::after {
        -webkit-animation: click-wave 0.25s;
        -moz-animation: click-wave 0.25s;
        animation: click-wave 0.25s;
        background: black;
        content: '';
        display: block;
        position: relative;
        z-index: 100;
        }
        .option-input.radio {
        border-radius: 50%;
        }
        .option-input.radio::after {
        border-radius: 50%;
        }
        .header {
        overflow: hidden;
        background-color: black;
        color: #F5F5DC;
        padding: 20px 10px;
        }
        
    </style>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="header">
        <h1 id = "main-name">Ma Tu, Come Ti Vedi?</h1>

    </div>   

<h1 id = "question">Who Are You?</h1>

<div class="button-container">
    <button id="teacher-btn">Teacher</button>
    <button id="student-btn">Student</button>
    <button id="other-btn">Other</button>
    <br>No personal data are collected.</br>
</div>

<!-- Student Questionnaire -->
<div id="student-section" class="section">
    <h2>Student Questionnaire</h2>
    <form id="student-form">
        <div class="form-control">
            <label>
                Do you feel anxious or worried before an exam?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio" id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label for="job" id="label-job">
                What do you think is the ideal job for your future?
            </label>
            <input type="text" id="job" placeholder="Enter your ideal job" />
        </div>
        <div class="form-control">
            <label>
                Have you ever been looking for information, read a book or watched a documentary on a topic that struck you?
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                When you are given a project at school do you prefer to work in a group or alone?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio"  id="alone-1" name="alone" value="Yes">In Group
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio"  id="alone-2" name="alone" value="No">Alone
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think you have a good relationship with your teachers?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio"  id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio"  id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>

<!-- Teacher Questionnaire -->
<div id="teacher-section" class="section">
    <h2>Teacher Questionnaire</h2>
    <form id="teacher-form">
        <div class="form-control">
            <label>
                Do you feel you have a good relationship with your students?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio"  id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                In your experience, do you think that students' socio-economic background influences their socio-emotional skills? 
            </label>
            <label for="job-1">
                <input type="radio" class="option-input radio" id="job-1" name="job" value="Yes">Yes
            </label>
            <label for="job-2">
                <input type="radio" class="option-input radio" id="job-2" name="job" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think remote teaching influences the learning of socio-emotional skills? 
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Among your pupils, do you think girls or boys are more motivated?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio" id="alone-1" name="alone" value="Girls">Girls
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio" id="alone-2" name="alone" value="Boys">Boys
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think anxiety influences your students' academic performance?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio" id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio" id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>
<!-- Other Section -->
<div id="other-section" class="section">
    <h2>Other Questionnaire</h2>
    <form id="other-form">
        <div class="form-control">
            <label>
                Do you think that students' socio-economic background influences their socio-emotional skills?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio" id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think that remote teaching influences the learning of socio-emotional skills? 
            </label>
            <label for="job-1">
                <input type="radio" class="option-input radio" id="job-1" name="job" value="Yes">Yes
            </label>
            <label for="job-2">
                <input type="radio" class="option-input radio" id="job-2" name="job" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you believe that anxiety has an impact on students' academic performance?
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                When you were in high school, did you have a good relationship with your teachers?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio" id="alone-1" name="alone" value="Girls">Girls
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio" id="alone-2" name="alone" value="Boys">Boys
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think that the way housework is distributed in the family can influence the formation of gender stereotypes?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio" id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio" id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>
<!-- Answers Section -->
<div id="answers-section">
    <h2>Your Answers</h2>
        <p id="answer-anxious"></p>
        <p id="answer-job"></p>
        <p id="answer-info"></p>
        <p id="answer-alone"></p>
        <p id="answer-rel"></p>
        <p id="answer-tip"></p>
</div>
<div id = general>

</div>

</div>
<!-- Explore More Section -->
<div id="explore-section">
    <h2>Explore More</h2>
    <div class="form-control">
        <label for="y-variable">Choose Social Emotional Skill:</label>
        <select id="y-variable">
            <option value="Stress_Resistance">Stress Resistance</option>
            <option value="Optimism">Optimism</option>
            <option value="Creativity">Creativity</option>
        </select>
    </div>
    <div class="form-control">
        <label for="x-variable">Choose Category:</label>
        <select id="x-variable">
            <option value="Gender">Gender</option>
            <option value="Immigration">Immigration Status</option>
            <option value="Socio_Economic_Statuts">Socio-Economic Status</option>
        </select>
    </div>
    <div class="form-control">
        <label for="country">Choose Country:</label>
        <select id="country">
            <option value="Italy">Italy</option>
            <option value="Spain">Spain</option>
        </select>
    </div>
    <button id="show-button">Show</button>
</div>

<div id="graph-container">
    <canvas style="height: 40vh !important; width: 40vw !important; justify-content: center;" id="bar-chart"></canvas>
    <button id="download-button">Download</button>
    <h3 id="text-stuff"></h3>
        
</div>
<div id = text-container>
    <h3 id="text-stuff"></h3>
</div>

<!-- Bar hfusdfhud Container -->
<br></br>
<p>
    Realizzato nell’ambito di ‘#Hack4BetterLives: digitally enhanced solutions for the analysis and
    visualization of the OCSE data on social and emotional skills’ organizzato da Fondazione per la Scuola
    della Compagnia di San Paolo in collaborazione con EGInA – European Grants International Academy
    dal 28 novembre al 1 dicembre 2024 presso il Collegio Carlo Alberto a Torino. Dati prevenienti da:
    Survey on Social and Emotional Skills (SSES) 2023, Organisation for Economic Co-operation and
    Development (OECD), Paris.
</p>
<p>
    © 2024. This work is openly licensed via 
    <a href="https://creativecommons.org/licenses/by-nc/4.0/deed.it" target="_blank" rel="noopener noreferrer">CC BY-NC 4.0.</a>
</p>
<script>
    let barChart;
    // Handle Teacher Button Click
    document.getElementById("teacher-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("student-section").style.display = "none";
        document.getElementById("teacher-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("teacher-section").offsetTop, behavior: "smooth" });
    });

    // Handle Student Button Click
    document.getElementById("student-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("student-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("student-section").offsetTop, behavior: "smooth" });
    });

    // Handle Other Button Click
    document.getElementById("other-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("other-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("student-section").offsetTop, behavior: "smooth" });
    });
    // Handle Student Form Submission
    document.getElementById("student-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get student answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.getElementById("job").value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Do you feel anxious? ${anxious}`;
        document.getElementById("answer-job").textContent = `Ideal Job: ${job}`;
        document.getElementById("answer-info").textContent = `Looking for info: ${info}`;
        document.getElementById("answer-alone").textContent = `Work preference: ${alone}`;
        document.getElementById("answer-rel").textContent = `Good relationship with teachers? ${rel}`;
        document.getElementById("answer-tip").innerHTML = '<b>Did you know:</b> On average, girls are less resistant to stress and exhibit more school performance anxiety before an exam or class than boys.'
        document.getElementById("general").textContent="Hi! These questions were relative to your experiences with anxiety and emotions at school. Abilities related to this domain are known as socioemotional skills or life skills. In 2023 OECD ran a survey in different cities of the world, use our tool below to explore their findings!"
        

        // Hide questionnaire and show answers section
        document.getElementById("student-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";
        document.getElementById("general").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle Teacher Form Submission
    document.getElementById("teacher-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get teacher answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.querySelector('input[name="job"]:checked')?.value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Good relationship with students? ${anxious}`;
        document.getElementById("answer-job").textContent = `Is socio-economic background important?: ${job}`;
        document.getElementById("answer-info").textContent = `Does remote teaching impact socio-emotianal skills? ${info}`;
        document.getElementById("answer-alone").textContent = `Who is more motivated?: ${alone}`;
        document.getElementById("answer-rel").textContent = `Does anxiety influence performance? ${rel}`;
        document.getElementById("answer-tip").innerHTML = '<b>Did you know:</b> Most teachers believe that online and distance learning hinders social-emotional learning.';
        document.getElementById("general").textContent="The questionnaire you filled out dealt with social and emotional skills. This category refers to all those skills that enable us to manage our emotions, relate to others, handle work and deal with complex situations effectively. In 2023, the OSCE surveyed 15-year-olds from different regions of the world to understand the determinants of these abilities, use the tool below to explore their findings and create nice visualization to address the topic with your students, or use the website with them for an interactive lecture!"

        // Hide questionnaire and show answers section
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";
        document.getElementById("general").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle other Form Submission
    document.getElementById("other-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get teacher answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.querySelector('input[name="job"]:checked')?.value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Does socio-economic background influences socio-emotional skills? ${anxious}`;
        document.getElementById("answer-job").textContent = `Does remote teaching influences the learning of socio-emotional skills? ${job}`;
        document.getElementById("answer-info").textContent = `Does anxiety has an impact on students' performance? ${info}`;
        document.getElementById("answer-alone").textContent = `Did you have good relationship with teahcers? ${alone}`;
        document.getElementById("answer-rel").textContent = `Does the way housework is distributed in the family influences gender stereotypes? ${rel}`;
        document.getElementById("answer-tip").innerHTML = '<b>Did you know:</b> In Italy, 1 in 5 students say they are not satisfied with their relationship with teachers.'

        document.getElementById("general").textContent="The questionnaire you filled out dealt with social and emotional skills. This category refers to all those skills that enable us to manage our emotions, relate to others, handle work and deal with complex situations effectively. In 2023, the OSCE surveyed 15-year-olds from different regions of the world to understand the determinants of these abilities, use the tool below to explore their findings!"
        // Hide questionnaire and show answers section
        document.getElementById("other-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";
        document.getElementById("general").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });    

    // Handle Explore More - Show Button Click
    
    // Add event listener to the "Show" button
    document.getElementById("show-button").addEventListener("click", function () {
    // Show the graph container
    document.getElementById("graph-container").style.display = "flex";
    document.getElementById("text-container").style.display = "flex";
    // Get selected values
    const yVariable = document.getElementById("y-variable").value;
    const xVariable = document.getElementById("x-variable").value;
    const country = document.getElementById("country").value;

    // Define color configuration for customization
    const colorConfig = {
        Stress_Resistance: {
            backgroundColor: ['#33FFFF', '#3399FF','#000099' ], // Custom background colors for Stress Resistance
            borderColor: ['#33FFFF', '#3399FF','#000099' ], // Custom border colors for Stress Resistance
        },
        Optimism: {
            backgroundColor: ['#33FFFF', '#3399FF','#000099' ], // Custom background colors for Optimism
            borderColor: ['#33FFFF', '#3399FF','#000099' ], // Custom border colors for Optimism
        },
        Creativity: {
            backgroundColor: ['#33FFFF', '#3399FF','#000099' ], // Custom background colors for Creativity
            borderColor:['#33FFFF', '#3399FF','#000099' ], // Custom border colors for Creativity
        }
    };

    // Define configurations for different dependent variables (Y)
    const chartConfig = {
        Stress_Resistance: {
            type: 'bar', // Use a bar chart for Stress_Resistance
            data: {
                Gender: { Spain: [2.64, 2.25], Italy: [2.51, 1.90] },
                Immigration: { Spain: [2.44, 2.51], Italy: [2.21, 2.27] },
                Socio_Economic_Statuts: { Spain: [2.42, 2.45, 2.49], Italy: [2.20, 2.22, 2.23] },
            },
            labels: {
                Gender: ['Male', 'Female'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
        Optimism: {
            type: 'bar', // Use a bar chart for Optimism
            data: {
                Gender: { Spain: [2.93, 2.55], Italy: [2.78, 2.32] },
                Immigration: { Spain: [2.76, 2.68], Italy: [2.58, 2.49] },
                Socio_Economic_Statuts: { Spain: [2.64, 2.75, 2.83], Italy: [2.51, 2.57, 2.62] },
            },
            labels: {
                Gender: ['Male', 'Female'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
        Creativity: {
            type: 'bar', // Use a bar chart for Creativity
            data: {
                Gender: { Spain: [2.70, 2.67], Italy: [2.63, 2.58] },
                Immigration: { Spain: [2.69, 2.67], Italy: [2.61, 2.61] },
                Socio_Economic_Statuts: { Spain: [2.61, 2.69, 2.76], Italy: [2.56, 2.58, 2.70] },
            },
            labels: {
                Gender: ['Male', 'Female'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
    };

    // Get the appropriate configuration based on Y
    const config = chartConfig[yVariable];
    const selectedData = config.data[xVariable][country];
    const labels = config.labels[xVariable];

    // Get the colors for the current chart type
    const colors = colorConfig[yVariable];

    // Get the canvas context
    const ctx = document.getElementById('bar-chart').getContext('2d');

    // Destroy the old chart if it exists
    if (window.barChart) {
        window.barChart.destroy();
    }

    // Create a new chart
    window.barChart = new Chart(ctx, {
        type: config.type, // Use the chart type defined for Y
        data: {
            labels: labels,
            datasets: [{
                label: `${yVariable} by ${xVariable} in ${country}`,
                data: selectedData,
                backgroundColor: colors.backgroundColor, // Use custom background colors
                borderColor: colors.borderColor, // Use custom border colors
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false }, // Control legend display
                title: {
                    display: true, // Enable the title
                    text: `${yVariable} by ${xVariable} in ${country}`, // Set the chart title dynamically
                    font: {
                        size: 16 // Customize font size for the title
                    }
                }
            },
            scales: config.type === 'bar' ? {
                x: {
                    title: {
                        display: true, // Enable x-axis label
                        text: `${xVariable}`, // Dynamic x-axis label
                        font: {
                            size: 14 // Customize font size for x-axis label
                        }
                    }
                },
                y: {
                    beginAtZero: true, // Start y-axis at 0
                    title: {
                        display: true, // Enable y-axis label
                        text: `${yVariable}`, // Dynamic y-axis label
                        font: {
                            size: 14 // Customize font size for y-axis label
                        }
                    }
                }
            } : {}
        }
    });



    // Dynamic Text Updates
    const textElement = document.getElementById("text-stuff");

    const dynamicText = {
        Stress_Resistance: {
            Italy: {
                Gender: `The higher the bar, the higher the capacity to resist stress. It seems that boys are more capable of resisting stressful situations than girls in Italy.`,
                Immigration: `The higher the bar, the higher the capacity to resist stress. It seems that students with an immigrant background are better at dealing with stressful situations than natives.`,
                Socio_Economic_Statuts: `The higher the bar, the higher the capacity to resist stress. There is not much variation in stress resistance depending on socioeconomic status in Italy.`,
            },
            Spain: {
                Gender: `The higher the bar, the higher the capacity to resist stress. It seems that boys are more capable of resisting stressful situations than girls in Spain.`,
                Immigration: `The higher the bar, the higher the capacity to resist stress. It seems that students with an immigrant background are better at dealing with stressful situations than natives.`,
                Socio_Economic_Statuts: `The higher the bar, the higher the capacity to resist stress. In Spain, it seems that individuals from less disadvantaged background are better at dealing with stressful situations.`,
            }
        },
        Optimism: {
            Spain: {
                Gender: `The higher the bar, the higher the level of optimism. As you can see, it seems that in Spain boys are more optimistic than girls.`,
                Immigration: `The higher the bar, the higher the reported level of optimism. It seems that in Spain natives are slightly more optimistic about their future than individuals with an immigrant background.`,
                Socio_Economic_Statuts: ` It seems that in Spain individuals from relatively better-off backgrounds are relatively more optimistic about the future than their peers from less advantaged backgrounds.
`,
            },
            Italy: {
                Gender: `The higher the bar, the higher the level of optimism. As you can see, it seems that in Italy boys are more optimistic than girls.`,
                Immigration: `The higher the bar, the higher the reported level of optimism. It seems that in Italy natives are slightly more optimistic about their future than individuals with an immigrant background.`,
                Socio_Economic_Statuts: ` It seems that in Italy individuals from relatively better-off backgrounds are relatively more optimistic about the future than their peers from less advantaged backgrounds.
`,
            }
        },
        Creativity: {
            Spain: {
                Gender: `The higher the bar, the higher the measure of creativity. It seems that both boys are girls are equally creative in Spain.`,
                Immigration: `The higher the bar, the higher the level of creativity. It seems that in Spain natives and individuals with an immigrant background have the same levels of creativity.`,
                Socio_Economic_Statuts: `It seems that in Spain individuals from relatively better-off backgrounds are relatively more creative about the future than their peers from less advantaged backgrounds.
`,
            },
            Italy: {
                Gender: `The higher the bar, the higher the measure of creativity. It seems that both boys are girls are equally creative in Italy.`,
                Immigration: `The higher the bar, the higher the level of creativity. It seems that in Italy natives and individuals with an immigrant background have the same levels of creativity.`,
                Socio_Economic_Statuts: `It seems that in Italy individuals from relatively better-off backgrounds are relatively more creative about the future than their peers from less advantaged backgrounds.
`,
            }
        },
    };

    // Set the dynamic text based on selected options
    textElement.innerHTML = dynamicText[yVariable][country][xVariable];

    // Smoothly scroll to the chart
    setTimeout(() => {
        window.scrollTo({
            top: document.getElementById("bar-chart").offsetTop,
            behavior: "smooth"
        });
    }, 300); // Allow time for rendering

// Download Chart
document.getElementById("download-button").addEventListener("click", function () {
    if (window.barChart) { // Ensure you are checking the global chart instance
        const url = window.barChart.toBase64Image(); // Use the global instance
        const link = document.createElement('a'); // Create a temporary link
        link.href = url;
        link.download = 'chart.png'; // Set the file name for download
        link.click(); // Simulate a click to trigger the download
    } else {
        alert("No chart available to download.");
    }
});
});

    
</script>

</body>
</html>
