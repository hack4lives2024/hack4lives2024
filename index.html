<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditional Questionnaire</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            text-align: center;
            background-color: #F5F5DC;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        form {
            background-color: #fff;
            max-width: 500px;
            margin: 50px auto;
            padding: 30px 20px;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
        }

        .form-control {
            text-align: left;
            margin-bottom: 25px;
        }

        .form-control input,
        .form-control select,
        .form-control textarea {
            border-radius: 8px;
        }
        .form-control label {
            display: block;
            margin-bottom: 10px;
        }
        .section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        .button-container {
            margin-top: 50px;
        }
        button {
            background-color: #F5F5DC;
            border: 1px solid #777;
            border-radius: 8px;
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
        }
        button:hover {
            background-color: #d3d3d3;
            cursor: pointer;
        }
        button:active {
            transform: scale(0.95);
        }
        form {
            background-color: #fff;
            max-width: 500px;
            margin: 50px auto;
            padding: 30px 20px;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
        }

        .form-control {
            text-align: left;
            margin-bottom: 25px;
        }

        .form-control input,
        .form-control select,
        .form-control textarea {
            border-radius: 8px;
        }
        #answers-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #answers-section h2 {
            text-align: center;
        }
        #explore-section {
            display: none;
            margin-top: 50px;
            padding: 30px;
            background-color: #fff;
            box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.2);
        }
        #graph-container {
            height: 100vh;
            display: flex;
            margin: 0 auto;
            margin-top: 50px;
            display: none;
            text-align: center;
        }
        footer {
            text-align: center;
            padding: 3px;
            background-color: black;
            color: white;
            grid-area: footer;
            margin-top: auto;
        }
        #download-button {
            margin-top: 20px; /* Space above the button */
            margin-bottom: 10px; /* Space below the button */
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #download-button:hover {
            background-color: #45a049;
        }
        @keyframes click-wave {
        0% {
            height: 40px;
            width: 40px;
            opacity: 0.15;
            position: relative;
        }
        100% {
            height: 200px;
            width: 200px;
            margin-left: -80px;
            margin-top: -80px;
            opacity: 0;
        }
        }

        .option-input {
        -webkit-appearance: none;
        -moz-appearance: none;
        -ms-appearance: none;
        -o-appearance: none;
        appearance: none;
        position: relative;
        top: 13.33333px;
        right: 0;
        bottom: 0;
        left: 0;
        height: 40px;
        width: 40px;
        transition: all 0.15s ease-out 0s;
        background: #cbd1d8;
        border: none;
        color: #fff;
        cursor: pointer;
        display: inline-block;
        margin-right: 0.5rem;
        outline: none;
        position: relative;
        z-index: 1000;
        }
        .option-input:hover {
        background: #9faab7;
        }
        .option-input:checked {
        background: black;
        }
        .option-input:checked::before {
        height: 40px;
        width: 40px;
        position: absolute;
        content: "\f111";
        font-family: "Font Awesome 5 Free";
        display: inline-block;
        font-size: 26.66667px;
        text-align: center;
        line-height: 40px;
        }
        #bar-chart {
            width: 80vw; /* Set the canvas width relative to the viewport */
            height: 80vh; /* Set the canvas height relative to the viewport */
        }
        .option-input:checked::after {
        -webkit-animation: click-wave 0.25s;
        -moz-animation: click-wave 0.25s;
        animation: click-wave 0.25s;
        background: black;
        content: '';
        display: block;
        position: relative;
        z-index: 100;
        }
        .option-input.radio {
        border-radius: 50%;
        }
        .option-input.radio::after {
        border-radius: 50%;
        }
        .header {
        overflow: hidden;
        background-color: black;
        color: #F5F5DC;
        padding: 20px 10px;
        }
        
    </style>
    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="header">
        <h1 id = "main-name">I Gaspari</h1>

    </div>   

<h1 id = "question">Who Are You?</h1>

<div class="button-container">
    <button id="teacher-btn">Teacher</button>
    <button id="student-btn">Student</button>
    <button id="other-btn">Other</button>
</div>

<!-- Student Questionnaire -->
<div id="student-section" class="section">
    <h2>Student Questionnaire</h2>
    <form id="student-form">
        <div class="form-control">
            <label>
                Do you feel anxious or worried before an exam?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio" id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label for="job" id="label-job">
                What do you think is the ideal job for your future?
            </label>
            <input type="text" id="job" placeholder="Enter your ideal job" />
        </div>
        <div class="form-control">
            <label>
                Have you ever been looking for information, read a book or watched a documentary on a topic that struck you?
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                When you are given a project at school do you prefer to work in a group or alone?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio"  id="alone-1" name="alone" value="Yes">In Group
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio"  id="alone-2" name="alone" value="No">Alone
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think you have a good relationship with your teachers?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio"  id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio"  id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>

<!-- Teacher Questionnaire -->
<div id="teacher-section" class="section">
    <h2>Teacher Questionnaire</h2>
    <form id="teacher-form">
        <div class="form-control">
            <label>
                Do you feel you have a good relationship with your students?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio"  id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                In your experience, do you think that students' socio-economic background influences their socio-emotional skills? 
            </label>
            <label for="job-1">
                <input type="radio" class="option-input radio" id="job-1" name="job" value="Yes">Yes
            </label>
            <label for="job-2">
                <input type="radio" class="option-input radio" id="job-2" name="job" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think remote teaching influences the learning of socio-emotional skills? 
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Among your pupils, do you think girls or boys are more motivated?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio" id="alone-1" name="alone" value="Girls">Girls
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio" id="alone-2" name="alone" value="Boys">Boys
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think anxiety influences your students' academic performance?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio" id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio" id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>
<!-- Other Section -->
<div id="other-section" class="section">
    <h2>Other Questionnaire</h2>
    <form id="other-form">
        <div class="form-control">
            <label>
                Do you feel you have a good relationship with your students?
            </label>
            <label for="anxious-1">
                <input type="radio" class="option-input radio" id="anxious-1" name="anxious" value="Yes">Yes
            </label>
            <label for="anxious-2">
                <input type="radio" class="option-input radio" id="anxious-2" name="anxious" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                In your experience, do you think that students' socio-economic background influences their socio-emotional skills? 
            </label>
            <label for="job-1">
                <input type="radio" class="option-input radio" id="job-1" name="job" value="Yes">Yes
            </label>
            <label for="job-2">
                <input type="radio" class="option-input radio" id="job-2" name="job" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think remote teaching influences the learning of socio-emotional skills? 
            </label>
            <label for="info-1">
                <input type="radio" class="option-input radio" id="info-1" name="info" value="Yes">Yes
            </label>
            <label for="info-2">
                <input type="radio" class="option-input radio" id="info-2" name="info" value="No">No
            </label>
        </div>
        <div class="form-control">
            <label>
                Among your pupils, do you think girls or boys are more motivated?
            </label>
            <label for="alone-1">
                <input type="radio" class="option-input radio" id="alone-1" name="alone" value="Girls">Girls
            </label>
            <label for="alone-2">
                <input type="radio" class="option-input radio" id="alone-2" name="alone" value="Boys">Boys
            </label>
        </div>
        <div class="form-control">
            <label>
                Do you think anxiety influences your students' academic performance?
            </label>
            <label for="rel-1">
                <input type="radio" class="option-input radio" id="rel-1" name="rel" value="Yes">Yes
            </label>
            <label for="rel-2">
                <input type="radio" class="option-input radio" id="rel-2" name="rel" value="No">No
            </label>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>
<!-- Answers Section -->
<div id="answers-section">
    <h2>Your Answers</h2>
        <p id="answer-anxious"></p>
        <p id="answer-job"></p>
        <p id="answer-info"></p>
        <p id="answer-alone"></p>
        <p id="answer-rel"></p>
</div>

<!-- Explore More Section -->
<div id="explore-section">
    <h2>Explore More</h2>
    <div class="form-control">
        <label for="y-variable">Choose Variable Y:</label>
        <select id="y-variable">
            <option value="Stress_Resistance">Stress Resistance</option>
            <option value="Optimism">Optimism</option>
            <option value="Creativity">Creativity</option>
        </select>
    </div>
    <div class="form-control">
        <label for="x-variable">Choose Variable X:</label>
        <select id="x-variable">
            <option value="Gender">Gender</option>
            <option value="Sleep">Sleep</option>
            <option value="Immigration">Immigration Status</option>
            <option value="Socio_Economic_Statuts">Socio-Economic Status</option>
        </select>
    </div>
    <div class="form-control">
        <label for="country">Choose Country:</label>
        <select id="country">
            <option value="Italy">Italy</option>
            <option value="Spain">Spain</option>
        </select>
    </div>
    <button id="show-button">Show</button>
</div>

<div id="graph-container">
    <canvas id="bar-chart"></canvas>
    <button id="download-button">Download</button>
    <h3 id="text-stuff">Some text</h3>
</div>

<!-- Bar Graph Container -->

<footer>
Put stuff here
</footer>
<script>
    let barChart;
    // Handle Teacher Button Click
    document.getElementById("teacher-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("student-section").style.display = "none";
        document.getElementById("teacher-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("teacher-section").offsetTop, behavior: "smooth" });
    });

    // Handle Student Button Click
    document.getElementById("student-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("student-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("student-section").offsetTop, behavior: "smooth" });
    });

    // Handle Other Button Click
    document.getElementById("other-btn").addEventListener("click", function() {
        document.getElementById("question").style.display = "none";
        document.querySelector(".button-container").style.display = "none";
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("other-section").style.display = "block";
        window.scrollTo({ top: document.getElementById("student-section").offsetTop, behavior: "smooth" });
    });
    // Handle Student Form Submission
    document.getElementById("student-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get student answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.getElementById("job").value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Do you feel anxious? ${anxious}`;
        document.getElementById("answer-job").textContent = `Ideal Job: ${job}`;
        document.getElementById("answer-info").textContent = `Looking for info: ${info}`;
        document.getElementById("answer-alone").textContent = `Work preference: ${alone}`;
        document.getElementById("answer-rel").textContent = `Good relationship with teachers? ${rel}`;

        

        // Hide questionnaire and show answers section
        document.getElementById("student-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle Teacher Form Submission
    document.getElementById("teacher-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get teacher answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.getElementById("job").value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Do you feel anxious? ${anxious}`;
        document.getElementById("answer-job").textContent = `Ideal Job: ${job}`;
        document.getElementById("answer-info").textContent = `Looking for info: ${info}`;
        document.getElementById("answer-alone").textContent = `Work preference: ${alone}`;
        document.getElementById("answer-rel").textContent = `Good relationship with teachers? ${rel}`;

        // Hide questionnaire and show answers section
        document.getElementById("teacher-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });

    // Handle other Form Submission
    document.getElementById("other-form").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission

        // Get teacher answers
        const anxious = document.querySelector('input[name="anxious"]:checked')?.value || "Not answered";
        const job = document.getElementById("job").value || "Not answered";
        const info = document.querySelector('input[name="info"]:checked')?.value || "Not answered";
        const alone = document.querySelector('input[name="alone"]:checked')?.value || "Not answered";
        const rel = document.querySelector('input[name="rel"]:checked')?.value || "Not answered";

        // Display answers in the answers section
        document.getElementById("answer-anxious").textContent = `Do you feel anxious? ${anxious}`;
        document.getElementById("answer-job").textContent = `Ideal Job: ${job}`;
        document.getElementById("answer-info").textContent = `Looking for info: ${info}`;
        document.getElementById("answer-alone").textContent = `Work preference: ${alone}`;
        document.getElementById("answer-rel").textContent = `Good relationship with teachers? ${rel}`;

        // Hide questionnaire and show answers section
        document.getElementById("other-section").style.display = "none";
        document.getElementById("answers-section").style.display = "block";

        // Show "Explore More" section
        document.getElementById("explore-section").style.display = "block";

        // Scroll to the answers section
        window.scrollTo({ top: document.getElementById("answers-section").offsetTop, behavior: "smooth" });
    });    

    // Handle Explore More - Show Button Click
    
    // Add event listener to the "Show" button
document.getElementById("show-button").addEventListener("click", function () {
    // Show the graph container
    document.getElementById("graph-container").style.display = "block";

    // Get selected values
    const yVariable = document.getElementById("y-variable").value;
    const xVariable = document.getElementById("x-variable").value;
    const country = document.getElementById("country").value;

    // Define configurations for different dependent variables (Y)
    const chartConfig = {
        Stress_Resistance: {
            type: 'bar', // Use a pie chart for 'anxiety'
            data: {
                Gender: { Spain: [2.64, 2.25], Italy: [2.51, 1.90] }, // Two categories for gender
                Sleep: { Spain: [2.50, 2.37, 2.25, 2.21], Italy: [2.29, 2.17, 2.05 ,1.96] }, // Two categories for gender
                Immigration: { Spain: [2.44, 2.51], Italy: [2.21, 2.27] }, // Two categories for gender
                Socio_Economic_Statuts: { Spain: [2.42,2.45,2.49], Italy: [2.20, 2.22, 2.23] }, // Two categories for gender
            },
            labels: {
                Gender: ['Male', 'Female'],
                Sleep: ['a', 'b', 'c', 'd'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
        Optimism: {
            type: 'bar', // Use a pie chart for 'anxiety'
            data: {
                Gender: { Spain: [2.93, 2.55], Italy: [2.78, 2.32] }, // Two categories for gender
                Sleep: { Spain: [2.77, 2.71, 2.40, 2.60], Italy: [2.66, 2.49, 2.33 ,2.2] }, // Two categories for gender
                Immigration: { Spain: [2.76, 2.68], Italy: [2.58, 2.49] }, // Two categories for gender
                Socio_Economic_Statuts: { Spain: [2.64,2.75,2.83], Italy: [2.51, 2.57, 2.62] }, // Two categories for gender
            },
            labels: {
                Gender: ['Male', 'Female'],
                Sleep: ['a', 'b', 'c', 'd'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
        Creativity: {
            type: 'bar', // Use a pie chart for 'anxiety'
            data: {
                Gender: { Spain: [2.70, 2.67], Italy: [2.63, 2.58] }, // Two categories for gender
                Sleep: { Spain: [2.71, 2.65, 2.66, 2.57], Italy: [2.64, 2.58, 2.54 ,2.54] }, // Two categories for gender
                Immigration: { Spain: [2.69, 2.67], Italy: [2.61, 2.61] }, // Two categories for gender
                Socio_Economic_Statuts: { Spain: [2.61,2.69,2.76], Italy: [2.56, 2.58, 2.70] }, // Two categories for gender
            },
            labels: {
                Gender: ['Male', 'Female'],
                Sleep: ['a', 'b', 'c', 'd'],
                Immigration: ['Native', 'Immigrant'],
                Socio_Economic_Statuts: ['Low', 'Medium', 'High']
            }
        },
    };

    // Get the appropriate configuration based on Y
    const config = chartConfig[yVariable];
    const selectedData = config.data[xVariable][country];
    const labels = config.labels[xVariable];

    // Get the canvas context
    const ctx = document.getElementById('bar-chart').getContext('2d');

    // Destroy the old chart if it exists
    if (window.barChart) {
        window.barChart.destroy();
    }

    // Create a new chart
    // Create a new chart
window.barChart = new Chart(ctx, {
    type: config.type, // Use the chart type defined for Y
    data: {
        labels: labels,
        datasets: [{
            label: `${yVariable} by ${xVariable} in ${country}`,
            data: selectedData,
            backgroundColor: labels.map((_, i) => `hsl(${i * 60}, 70%, 50%)`), // Dynamic colors
            borderColor: labels.map((_, i) => `hsl(${i * 60}, 70%, 40%)`),
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { display: false }, // Control legend display
            title: {
                display: true, // Enable the title
                text: `${yVariable} by ${xVariable} in ${country}`, // Set the chart title dynamically
                font: {
                    size: 16 // Customize font size for the title
                }
            }
        },
        scales: config.type === 'bar' ? {
            x: {
                title: {
                    display: true, // Enable x-axis label
                    text: `${xVariable}`, // Dynamic x-axis label
                    font: {
                        size: 14 // Customize font size for x-axis label
                    }
                }
            },
            y: {
                beginAtZero: true, // Start y-axis at 0
                title: {
                    display: true, // Enable y-axis label
                    text: `${yVariable}`, // Dynamic y-axis label
                    font: {
                        size: 14 // Customize font size for y-axis label
                    }
                }
            }
        } : {}
    }
});


        setTimeout(() => {
            window.scrollTo({
                top: document.getElementById("bar-chart").offsetTop + document.getElementById("bar-chart").offsetHeight,
                behavior: "smooth"
            });
        }, 300); // Allow time for rendering
    });

    // Download Chart
document.getElementById("download-button").addEventListener("click", function () {
    if (window.barChart) { // Ensure you are checking the global chart instance
        const url = window.barChart.toBase64Image(); // Use the global instance
        const link = document.createElement('a'); // Create a temporary link
        link.href = url;
        link.download = 'chart.png'; // Set the file name for download
        link.click(); // Simulate a click to trigger the download
    } else {
        alert("No chart available to download.");
    }
});

    
</script>

</body>
</html>
